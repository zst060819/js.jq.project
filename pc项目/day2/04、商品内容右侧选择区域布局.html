<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>自己的</title>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="css/index.css">
</head>
<body style="height: 2000px">
<!--包裹容器-->
<div class="wrap">
    <!--头部-->
    <header class="header">
        <!--头部导航区域-->
        <div class="top">
            <!--版心-->
            <div class="container">
                <div class="loginList">
                    <p>尚品汇欢迎您！</p>
                    <p>
                        <span>请</span>
                        <a href="###">登录 </a>
                        <a href="###" class="register">免费注册</a>
                    </p>
                </div>
                <!--导航如果是静态 可以直接使用a标签  如果导航有动态效果  就需要嵌套ul-->
                <div class="typeList">
                    <a href="###">我的订单</a>
                    <a href="###">我的购物车</a>
                    <a href="###">我的尚品汇</a>
                    <a href="###">尚品汇会员</a>
                    <a href="###">企业采购</a>
                    <a href="###">关注尚品汇</a>
                    <a href="###">合作招商</a>
                    <a href="###">商家后台</a>
                </div>

            </div>
        </div>
        <!--搜索框区域-->
        <div class="bottom">
            <h1 class="logoArea">
                <a href="###" title="尚品汇">
                    <img src="img/Logo.png" alt="尚品汇">
                </a>
            </h1>
            <div class="searchArea">
                <form action="###">
                    <input type="text" class="inputSearch">
                    <button class="submit">搜索</button>
                </form>
            </div>
        </div>
    </header>
    <!--商品导航分类-->
    <div class="typeNav">
        <div class="container">
            <h2>全部商品分类</h2>
            <nav>
                <a href="###">服装城</a>
                <a href="###">美妆馆</a>
                <a href="###">尚品惠超市</a>
                <a href="###">全球购</a>
                <a href="###">闪购</a>
                <a href="###">团购</a>
                <a href="###">有趣</a>
                <a href="###">秒杀</a>
            </nav>
        </div>
    </div>
    <!--主要内容区域-->
    <section class="con">
        <!--路径导航-->
        <div class="conPoin">
            <a href="###">手机、数码、通讯</a>
            <i>/</i>
            <a href="###">手机</a>
            <i>/</i>
            <a href="###">Apple手机</a>
            <i>/</i>
            <a>iphone 6S系类</a>
        </div>
        <!--内容区-->
        <div class="mainCon">
            <!--左侧放大镜区域-->
            <div class="previewWrap">
                <!--放大镜效果区域-->
                <div class="preview">
                    <div class="zoom">
                        <!--小图-->
                        <img src="img/s1.png" alt="">
                        <!--蒙版-->
                    </div>
                    <!--大图-->
                </div>
                <!--缩略图区域-->
                <div class="specScroll">
                    <a class="prev">&lt;</a>
                    <div class="items">
                        <ul class="list">
                            <li><img src="img/s1.png" alt=""></li>
                            <li><img src="img/s2.png" alt=""></li>
                            <li><img src="img/s3.png" alt=""></li>
                            <li><img src="img/s1.png" alt=""></li>
                            <li><img src="img/s2.png" alt=""></li>
                            <li><img src="img/s3.png" alt=""></li>
                            <li><img src="img/s1.png" alt=""></li>
                            <li><img src="img/s2.png" alt=""></li>

                        </ul>
                    </div>
                    <a class="next">&gt;</a>
                </div>
            </div>
            <!--商品内容右侧选择区域-->
            <div class="infoWrap">
                <!--商品信息-->
                <div class="info1">
                    <h3 class="infoName">Apple iPhone 6s（A1700）64G玫瑰金色 移动通信电信4G手机</h3>
                    <p class="news">推荐选择下方[移动优惠购],手机套餐齐搞定,不用换号,每月还有花费返</p>
                    <div class="priceArea">
                        <div class="priceArea1">
                            <div class="title">价&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;格</div>
                            <div class="price">
                                <i>¥</i>
                                <em>5299</em>
                                <span>降价通知</span>
                            </div>
                            <div class="remark">
                                <i>累计评价</i>
                                <span>3283</span>
                            </div>
                        </div>
                        <div class="priceArea2">
                            <div class="title">促&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;销</div>
                            <div class="fixWidth">
                                <i>加价购</i>
                                <em>满999.00另加20.00元，或满1999.00另加30.00元，或满2999.00另加40.00元，即可在购物车换购热销商品</em>
                            </div>
                        </div>
                    </div>
                    <div class="support">
                        <div class="supportArea">
                            <div class="title">支&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;持</div>
                            <p>以旧换新，闲置手机回收 4G套餐超值抢 礼品购</p>
                        </div>
                        <div class="supportArea">
                            <div class="title">配&nbsp;送&nbsp;至</div>
                            <p>广东省 深圳市 宝安区</p>
                        </div>
                    </div>
                </div>
                <!--筛选区域-->
                <div class="choose">
                    <!--选择区域-->
                    <div class="chooseArea">
                        <dl>
                            <dt>选择颜色</dt>
                            <dd>金色</dd>
                            <dd>银色</dd>
                            <dd>黑色</dd>
                        </dl>
                        <dl>
                            <dt>内存容量</dt>
                            <dd>16G</dd>
                            <dd>64G</dd>
                            <dd>128G</dd>
                            <dd>256G</dd>
                        </dl>
                        <dl>
                            <dt>选择版本</dt>
                            <dd>公开版</dd>
                            <dd>移动版</dd>
                        </dl>
                        <dl>
                            <dt>购买方式</dt>
                            <dd>官方标配</dd>
                            <dd>移动合约</dd>
                            <dd>联通合约</dd>
                        </dl>
                    </div>
                    <!--购物车区域-->
                    <div class="cartWrap">
                        <!--数量选择-->
                        <div class="controls">
                            <input type="text" value="1">
                            <a class="plus">+</a>
                            <a class="minus">-</a>
                        </div>
                        <!--加入购物车-->
                        <div class="add">
                            <a href="###">加入购物车</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
</div>
<script type="text/javascript">
    window.onload = function () {
//        放大镜大图索引
        var magnifierId = 0;
//    放大镜效果
        magnifier();
        function magnifier() {
//            模拟后台数据
            var imgsrc = [
                { b: "./img/b1.png", s: "./img/s1.png" },
                { b: "./img/b2.png", s: "./img/s2.png" },
                { b: "./img/b3.png", s: "./img/s3.png" },
                { b: "./img/b1.png", s: "./img/s1.png" },
                { b: "./img/b2.png", s: "./img/s2.png" },
                { b: "./img/b3.png", s: "./img/s3.png" },
                { b: "./img/b1.png", s: "./img/s1.png" },
                { b: "./img/b2.png", s: "./img/s2.png" }
            ];
//        获取小图容器
            var zoomNode = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom');
//        获取放大镜外层容器
            var previewNode = document.querySelector('.wrap .con .mainCon .previewWrap .preview')
//        初始化蒙版
            var maskNode = null;
//        初始化大图容器
            var bigImgBoxNode = null;
//        初始化大图
            var bigImgNode = null;

//        绑定鼠标移入移出事件
            previewNode.onmouseenter = function () {
//        当鼠标移入元素，创建蒙版，大图，大图容器 如果蒙版不存 即可创建 如果存在 不创建
                if(!maskNode){//只要能进这个判断 mask一定是null  说明没有蒙版元素
//                  创建蒙版
                    maskNode = document.createElement('div');
//                结合css当中已经存在的class  对蒙版设置样式
                    maskNode.className = 'mask';
//                  把蒙版插入到小图容器当中
                    zoomNode.appendChild(maskNode);
//                 如果蒙版不存在 大图和大图容器一定也不存在 所以直接同时创建即可
//                 创建大图容器
                    bigImgBoxNode = document.createElement('div');
                    bigImgBoxNode.className = 'bigImgBox';
//                 创建大图
                    bigImgNode = new Image();
//                  bigImgNode = document.createElement('img');
//                   把放大镜生成的大图路径 改为动态
                    bigImgNode.src = imgsrc[magnifierId].b;
//                 把大图放入到大图容器当中
                    bigImgBoxNode.appendChild(bigImgNode);
//                  把大图容器添加到放大镜结构中
                    previewNode.appendChild(bigImgBoxNode);
                }
                zoomNode.onmousemove = function (event) {
//              移动的逻辑
//        当元素移动的时候 蒙版的位置   鼠标的clientX - 蒙版一半 - 父级距离屏幕边缘的位置
                    var maskPosition = {
                        left:event.clientX - maskNode.offsetWidth / 2 - zoomNode.getBoundingClientRect().left,
                        top: event.clientY - maskNode.offsetHeight / 2 - zoomNode.getBoundingClientRect().top
                    };
//                console.log(maskPosition)
//                判断边界     右侧边界的判断小图容器宽度 - 蒙版宽度
                    if(maskPosition.left <= 0){
                        maskPosition.left = 0;
                    }else if(maskPosition.left >= zoomNode.clientWidth - maskNode.offsetWidth){
                        maskPosition.left = zoomNode.clientWidth - maskNode.offsetWidth;
                    }
                    if(maskPosition.top <= 0){
                        maskPosition.top = 0;
                    }else if(maskPosition.top >= zoomNode.clientHeight - maskNode.offsetHeight){
                        maskPosition.top = zoomNode.clientHeight - maskNode.offsetHeight;
                    }
//                对蒙版进行赋值
                    maskNode.style.left = maskPosition.left + 'px';
                    maskNode.style.top = maskPosition.top + 'px';
//              计算比例: 蒙版总共可以移动的距离 / 大图能够移动的距离
                    var scale = (zoomNode.clientWidth - maskNode.offsetWidth) / (bigImgNode.offsetWidth-bigImgBoxNode.clientWidth)
//              计算大图偏移
                    var bigImgPosition = {
                        left:maskPosition.left / scale,
                        top:maskPosition.top / scale
                    };
//                给大图修改位置
                    bigImgNode.style.marginLeft = - bigImgPosition.left + 'px';
                    bigImgNode.style.marginTop = - bigImgPosition.top + 'px';
                };
                previewNode.onmouseleave = function () {
//                删除大图容器  和蒙版
                    zoomNode.removeChild(maskNode);
                    previewNode.removeChild(bigImgBoxNode);
//              把蒙版元素的变量初始化
                    maskNode = null;
                    bigImgBoxNode = null;
                    bigImgNode = null;
//              事件解绑
                    zoomNode.onmousemove = null;
                    previewNode.onmouseleave= null;
                }
            }
        }
//        获取元素非行间样式
        function getStyle(obj,attr) {
            if(obj.currentStyle){
              return obj.currentStyle(attr);
            }else{
                return window.getComputedStyle(obj)[attr];
            }
        }
//      缩略图滑动效果
        thumbnail();
        function thumbnail() {
//         左右按钮
            var prevNode = document.querySelector('.wrap .con .mainCon .specScroll .prev');
            var nextNode = document.querySelector('.wrap .con .mainCon .specScroll .next');
//         图片容器(ul)
            var listNode = document.querySelector('.wrap .con .mainCon .specScroll .items .list');
//         获取li
            var liNodes = document.querySelectorAll('.wrap .con .mainCon .specScroll .items .list>li');
//          定义每次滑动的数量
            var moveNum = 2;
//          定义容器中默认显示的数量
            var viewNum = 5;
//          一次移动两张图片   两张图片的宽度 + 两倍的marginRight
//           移动规则 如果剩余距离够移动则正常移动   如果不够 直接走完剩余距离
//         计算总共可以移动的长度   （li总数 - 默认显示li的个数）* （li的宽度+ li的marginRight）
            var countLength = (liNodes.length - viewNum) * (liNodes[0].offsetWidth + parseInt(getStyle(liNodes[0],'marginRight')))
//          计算每次移动的长度  (一个元素的宽度（带margin）) * 每次移动的数量
            var moveLength = (liNodes[0].offsetWidth + parseInt(getStyle(liNodes[0],'marginRight'))) * moveNum;
//          初始化已经移动的距离
            var tempLenght = 0;

            nextNode.onclick = function () {
//             如果已经走过的距离 小于总共可以走的距离 才能继续移动
                if(tempLenght < countLength){
//                  剩余距离 大于每次可以移动的长度   则每次都该走的距离
//                  剩余的距离 = 总共可以走的距离 - 已经移动的距离

                    if(countLength - tempLenght > moveLength){
                      tempLenght += moveLength;
                      listNode.style.left = -tempLenght + 'px';
                    }else{
//                    剩余距离小于每次可以移动的距离  则直接走完剩余的
                        tempLenght += (countLength - tempLenght);
                        listNode.style.left = - tempLenght + 'px';
                    }
//                   假设countLength = 110    每次走的是20
//                    countLength=110     tempLenght= 0
//                    countLength=110     tempLenght= 20   剩余距离90
//                    countLength=110     tempLenght= 40   剩余距离70
//                    countLength=110     tempLenght= 60   剩余距离50
//                    countLength=110     tempLenght= 80   剩余距离30
//                    countLength=110     tempLenght= 100   剩余距离10
                }
            };
            prevNode.onclick = function () {
//              相对于prev按钮来说   可以动的距离 就是tempLenght
                if(tempLenght > 0){
//                    如果可以走的距离 大于每次移动的距离 则走该走的长度  否则直接为0
                    if(tempLenght > moveLength){
                      tempLenght -= moveLength;
                      listNode.style.left = - tempLenght + 'px';
                    }else{
                        tempLenght = 0;
                        listNode.style.left = tempLenght + 'px';
                    }
                }
            }
        }
//      缩略图点击效果
        thumbnailClick();
        function thumbnailClick() {
//           获取容器中图片的集合
            var scrollItems = document.querySelectorAll('.wrap .con .mainCon .specScroll .items .list li>img');
//          获取小图
            var zoomImgNode = document.querySelector('.wrap .con .mainCon .previewWrap .preview .zoom>img');
//          给所有图片单击事件
            for (var i = 0; i < scrollItems.length; i++) {
//                scrollItems[i].index = i;
                scrollItems[i].onclick = function () {
                    for (var j = 0; j < scrollItems.length; j++) {
                        if(scrollItems[j] == this){
//          当点击是  我能够获得缩略图的索引  通过这个索引可以去数据当中照当对应的大图路径
                            magnifierId = j;
                        }
                    }
//                  修改小图
                    zoomImgNode.src = this.src;
                }
            }
        }
    };
    var str = 'aaccddvvasdadqwd';
//    统计每个字母出现的次数
//    关系数组(关联数组)  长度永远为0
//    使用字符串当做索引
    var arr = [];
////    arr[0] = 20;
//    arr['a'] = 1;
//    arr['b'] = 3;
//    arr['c'] = 4;
//    console.log(arr)
    for (var i = 0; i < str.length; i++) {
        arr[str[i]] = arr[str[i]] + 1 || 1;
        arr[str[0]] = arr[str[0]] +1 || 1;
        arr['a'] = arr['a'] +1 || 1;
    }
    console.log(arr)
    
</script>
</body>
</html>